/*!
 * @0b5vr/imtweakpane v0.2.0
 * Tweakpane but with immediate-y interface (actually not)
 *
 * Copyright (c) 2021-2023 0b5vr
 * @0b5vr/imtweakpane is distributed under MIT License
 * https://github.com/0b5vr/imtweakpane/blob/master/LICENSE
 */
import { Pane } from 'tweakpane';

class ImContainerApi {
    constructor(container) {
        this.containerApi = container;
        this.__params = {};
        this.__folders = {};
        this.__buttons = {};
        this.__tabs = {};
        this.__bindings = {};
        this.__blades = {};
    }
    folder(title, params) {
        const path = title.split("/");
        if (path.length > 1) {
            const folder = path[0];
            const remainingPath = path.slice(1).join("/");
            return this.folder(folder).folder(remainingPath, params);
        }
        if (!ImContainerApi.imFolderApiCtor) {
            throw new Error("ImContainerApi.imFolderApiCtor is not set"
                );
        }
        if (this.__folders[title] == null) {
            const folder = this.containerApi.addFolder(Object.assign({ title }, params));
            this.__folders[title] = new ImContainerApi.imFolderApiCtor(folder);
        }
        return this.__folders[title];
    }
    button(title, params) {
        const path = title.split("/");
        if (path.length > 1) {
            const folder = path[0];
            const remainingPath = path.slice(1).join("/");
            return this.folder(folder).button(remainingPath, params);
        }
        if (this.__buttons[title] == null) {
            const button = this.containerApi.addButton(Object.assign({ title }, params));
            this.__buttons[title] = button;
        }
        return this.__buttons[title];
    }
    tab(id, params) {
        const path = id.split("/");
        if (path.length > 1) {
            const folder = path[0];
            const remainingPath = path.slice(1).join("/");
            return this.folder(folder).tab(remainingPath, params);
        }
        if (!ImContainerApi.imTabApiCtor) {
            throw new Error("ImContainerApi.imTabApiCtor is not set"
                );
        }
        if (this.__tabs[id] == null) {
            const tab = this.containerApi.addTab(params !== null && params !== void 0 ? params : { pages: [] });
            this.__tabs[id] = new ImContainerApi.imTabApiCtor(tab);
        }
        return this.__tabs[id];
    }
    value(key, init, params) {
        var _a;
        const path = key.split("/");
        if (path.length > 1) {
            const folder = path[0];
            const remainingPath = path.slice(1).join("/");
            return this.folder(folder).value(remainingPath, init, params);
        }
        this.binding(key, init, params);
        return (_a = this.__params[key]) !== null && _a !== void 0 ? _a : null;
    }
    binding(key, init, params) {
        var _a;
        const path = key.split("/");
        if (path.length > 1) {
            const folder = path[0];
            const remainingPath = path.slice(1).join("/");
            return this.folder(folder).binding(remainingPath, init, params);
        }
        if (init != null) {
            if (this.__params[key] == null) {
                this.__params[key] = init;
                const binding = this.containerApi.addBinding(this.__params, key, params);
                this.__bindings[key] = binding;
            }
            else if (params === null || params === void 0 ? void 0 : params.readonly) {
                this.__params[key] = init;
            }
        }
        return (_a = this.__bindings[key]) !== null && _a !== void 0 ? _a : null;
    }
    blade(id, params) {
        const path = id.split("/");
        if (path.length > 1) {
            const folder = path[0];
            const remainingPath = path.slice(1).join("/");
            return this.folder(folder).blade(remainingPath, params);
        }
        if (this.__blades[id] == null && params != null) {
            const blade = this.containerApi.addBlade(params);
            this.__blades[id] = blade;
        }
        return this.__blades[id];
    }
}

class ImFolderApi extends ImContainerApi {
    get folderApi() {
        return this.containerApi;
    }
    constructor(folder) {
        super(folder);
    }
}
// don't worry about it
ImContainerApi.imFolderApiCtor = ImFolderApi;

class ImPane extends ImContainerApi {
    get pane() {
        return this.containerApi;
    }
    constructor(config) {
        super(new Pane(config));
    }
}

class ImTabPageApi extends ImContainerApi {
    get folderApi() {
        return this.containerApi;
    }
    constructor(page) {
        super(page);
    }
}

class ImTabApi {
    constructor(tabApi) {
        this.tabApi = tabApi;
        this.__pages = {};
        tabApi.pages.forEach((page) => {
            this.__pages[page.title] = new ImTabPageApi(page);
        });
    }
    page(title, params) {
        if (this.__pages[title] == null) {
            const page = this.tabApi.addPage(Object.assign({ title }, params));
            this.__pages[title] = new ImTabPageApi(page);
        }
        return this.__pages[title];
    }
}
// don't worry about it
ImContainerApi.imTabApiCtor = ImTabApi;

export { ImContainerApi, ImFolderApi, ImPane, ImTabApi, ImTabPageApi };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW10d2Vha3BhbmUubW9kdWxlLmpzIiwic291cmNlcyI6WyIuLi9zcmMvSW1Db250YWluZXJBcGkudHMiLCIuLi9zcmMvSW1Gb2xkZXJBcGkudHMiLCIuLi9zcmMvSW1QYW5lLnRzIiwiLi4vc3JjL0ltVGFiUGFnZUFwaS50cyIsIi4uL3NyYy9JbVRhYkFwaS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBUd2Vha3BhbmUgZnJvbSBcInR3ZWFrcGFuZVwiO1xuaW1wb3J0IHtcbiAgQmxhZGVDb250cm9sbGVyLFxuICBCaW5kaW5nQXBpLFxuICBDb250YWluZXJBcGksXG4gIFZpZXcsXG59IGZyb20gXCJAdHdlYWtwYW5lL2NvcmVcIjtcbmltcG9ydCB0eXBlIHsgSW1Gb2xkZXJBcGkgfSBmcm9tIFwiLi9JbUZvbGRlckFwaVwiO1xuaW1wb3J0IHR5cGUgeyBJbVRhYkFwaSB9IGZyb20gXCIuL0ltVGFiQXBpXCI7XG5cbmV4cG9ydCBjbGFzcyBJbUNvbnRhaW5lckFwaTxUQ29udGFpbmVyQXBpIGV4dGVuZHMgQ29udGFpbmVyQXBpPiB7XG4gIC8qKlxuICAgKiBEb24ndCB3b3JyeSBhYm91dCBpdFxuICAgKi9cbiAgcHVibGljIHN0YXRpYyBpbUZvbGRlckFwaUN0b3I/OiB0eXBlb2YgSW1Gb2xkZXJBcGk7XG5cbiAgLyoqXG4gICAqIERvbid0IHdvcnJ5IGFib3V0IGl0XG4gICAqL1xuICBwdWJsaWMgc3RhdGljIGltVGFiQXBpQ3Rvcj86IHR5cGVvZiBJbVRhYkFwaTtcblxuICBwdWJsaWMgcmVhZG9ubHkgY29udGFpbmVyQXBpOiBUQ29udGFpbmVyQXBpO1xuICBwcml2YXRlIHJlYWRvbmx5IF9fcGFyYW1zOiB7IFtrZXk6IHN0cmluZ106IGFueSB9O1xuICBwcml2YXRlIHJlYWRvbmx5IF9fZm9sZGVyczogeyBbdGl0bGU6IHN0cmluZ106IEltRm9sZGVyQXBpIH07XG4gIHByaXZhdGUgcmVhZG9ubHkgX19idXR0b25zOiB7IFt0aXRsZTogc3RyaW5nXTogVHdlYWtwYW5lLkJ1dHRvbkFwaSB9O1xuICBwcml2YXRlIHJlYWRvbmx5IF9fdGFiczogeyBbaWQ6IHN0cmluZ106IEltVGFiQXBpIH07XG4gIHByaXZhdGUgcmVhZG9ubHkgX19iaW5kaW5nczogeyBba2V5OiBzdHJpbmddOiBCaW5kaW5nQXBpPHVua25vd24sIGFueSwgYW55PiB9O1xuICBwcml2YXRlIHJlYWRvbmx5IF9fYmxhZGVzOiB7XG4gICAgW2tleTogc3RyaW5nXTogVHdlYWtwYW5lLkJsYWRlQXBpPEJsYWRlQ29udHJvbGxlcjxWaWV3Pj47XG4gIH07XG5cbiAgcHVibGljIGNvbnN0cnVjdG9yKGNvbnRhaW5lcjogVENvbnRhaW5lckFwaSkge1xuICAgIHRoaXMuY29udGFpbmVyQXBpID0gY29udGFpbmVyO1xuICAgIHRoaXMuX19wYXJhbXMgPSB7fTtcbiAgICB0aGlzLl9fZm9sZGVycyA9IHt9O1xuICAgIHRoaXMuX19idXR0b25zID0ge307XG4gICAgdGhpcy5fX3RhYnMgPSB7fTtcbiAgICB0aGlzLl9fYmluZGluZ3MgPSB7fTtcbiAgICB0aGlzLl9fYmxhZGVzID0ge307XG4gIH1cblxuICBwdWJsaWMgZm9sZGVyKFxuICAgIHRpdGxlOiBzdHJpbmcsXG4gICAgcGFyYW1zPzogUGFydGlhbDxUd2Vha3BhbmUuRm9sZGVyUGFyYW1zPixcbiAgKTogSW1Gb2xkZXJBcGkge1xuICAgIGNvbnN0IHBhdGggPSB0aXRsZS5zcGxpdChcIi9cIik7XG4gICAgaWYgKHBhdGgubGVuZ3RoID4gMSkge1xuICAgICAgY29uc3QgZm9sZGVyID0gcGF0aFswXTtcbiAgICAgIGNvbnN0IHJlbWFpbmluZ1BhdGggPSBwYXRoLnNsaWNlKDEpLmpvaW4oXCIvXCIpO1xuICAgICAgcmV0dXJuIHRoaXMuZm9sZGVyKGZvbGRlcikuZm9sZGVyKHJlbWFpbmluZ1BhdGgsIHBhcmFtcyk7XG4gICAgfVxuXG4gICAgaWYgKCFJbUNvbnRhaW5lckFwaS5pbUZvbGRlckFwaUN0b3IpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09IFwiZGV2ZWxvcG1lbnRcIlxuICAgICAgICAgID8gXCJJbUNvbnRhaW5lckFwaS5pbUZvbGRlckFwaUN0b3IgaXMgbm90IHNldFwiXG4gICAgICAgICAgOiB1bmRlZmluZWQsXG4gICAgICApO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9fZm9sZGVyc1t0aXRsZV0gPT0gbnVsbCkge1xuICAgICAgY29uc3QgZm9sZGVyID0gdGhpcy5jb250YWluZXJBcGkuYWRkRm9sZGVyKHsgdGl0bGUsIC4uLnBhcmFtcyB9KTtcbiAgICAgIHRoaXMuX19mb2xkZXJzW3RpdGxlXSA9IG5ldyBJbUNvbnRhaW5lckFwaS5pbUZvbGRlckFwaUN0b3IoZm9sZGVyKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5fX2ZvbGRlcnNbdGl0bGVdO1xuICB9XG5cbiAgcHVibGljIGJ1dHRvbihcbiAgICB0aXRsZTogc3RyaW5nLFxuICAgIHBhcmFtcz86IFBhcnRpYWw8VHdlYWtwYW5lLkJ1dHRvblBhcmFtcz4sXG4gICk6IFR3ZWFrcGFuZS5CdXR0b25BcGkge1xuICAgIGNvbnN0IHBhdGggPSB0aXRsZS5zcGxpdChcIi9cIik7XG4gICAgaWYgKHBhdGgubGVuZ3RoID4gMSkge1xuICAgICAgY29uc3QgZm9sZGVyID0gcGF0aFswXTtcbiAgICAgIGNvbnN0IHJlbWFpbmluZ1BhdGggPSBwYXRoLnNsaWNlKDEpLmpvaW4oXCIvXCIpO1xuICAgICAgcmV0dXJuIHRoaXMuZm9sZGVyKGZvbGRlcikuYnV0dG9uKHJlbWFpbmluZ1BhdGgsIHBhcmFtcyk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX19idXR0b25zW3RpdGxlXSA9PSBudWxsKSB7XG4gICAgICBjb25zdCBidXR0b24gPSB0aGlzLmNvbnRhaW5lckFwaS5hZGRCdXR0b24oeyB0aXRsZSwgLi4ucGFyYW1zIH0pO1xuICAgICAgdGhpcy5fX2J1dHRvbnNbdGl0bGVdID0gYnV0dG9uO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLl9fYnV0dG9uc1t0aXRsZV07XG4gIH1cblxuICBwdWJsaWMgdGFiKGlkOiBzdHJpbmcsIHBhcmFtcz86IFR3ZWFrcGFuZS5UYWJQYXJhbXMpOiBJbVRhYkFwaSB7XG4gICAgY29uc3QgcGF0aCA9IGlkLnNwbGl0KFwiL1wiKTtcbiAgICBpZiAocGF0aC5sZW5ndGggPiAxKSB7XG4gICAgICBjb25zdCBmb2xkZXIgPSBwYXRoWzBdO1xuICAgICAgY29uc3QgcmVtYWluaW5nUGF0aCA9IHBhdGguc2xpY2UoMSkuam9pbihcIi9cIik7XG4gICAgICByZXR1cm4gdGhpcy5mb2xkZXIoZm9sZGVyKS50YWIocmVtYWluaW5nUGF0aCwgcGFyYW1zKTtcbiAgICB9XG5cbiAgICBpZiAoIUltQ29udGFpbmVyQXBpLmltVGFiQXBpQ3Rvcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gXCJkZXZlbG9wbWVudFwiXG4gICAgICAgICAgPyBcIkltQ29udGFpbmVyQXBpLmltVGFiQXBpQ3RvciBpcyBub3Qgc2V0XCJcbiAgICAgICAgICA6IHVuZGVmaW5lZCxcbiAgICAgICk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX190YWJzW2lkXSA9PSBudWxsKSB7XG4gICAgICBjb25zdCB0YWIgPSB0aGlzLmNvbnRhaW5lckFwaS5hZGRUYWIocGFyYW1zID8/IHsgcGFnZXM6IFtdIH0pO1xuICAgICAgdGhpcy5fX3RhYnNbaWRdID0gbmV3IEltQ29udGFpbmVyQXBpLmltVGFiQXBpQ3Rvcih0YWIpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLl9fdGFic1tpZF07XG4gIH1cblxuICBwdWJsaWMgdmFsdWU8VCBleHRlbmRzIGFueT4oXG4gICAga2V5OiBzdHJpbmcsXG4gICAgaW5pdD86IFQsXG4gICAgcGFyYW1zPzogVHdlYWtwYW5lLkJpbmRpbmdQYXJhbXMsXG4gICk6IFQgfCBudWxsIHtcbiAgICBjb25zdCBwYXRoID0ga2V5LnNwbGl0KFwiL1wiKTtcbiAgICBpZiAocGF0aC5sZW5ndGggPiAxKSB7XG4gICAgICBjb25zdCBmb2xkZXIgPSBwYXRoWzBdO1xuICAgICAgY29uc3QgcmVtYWluaW5nUGF0aCA9IHBhdGguc2xpY2UoMSkuam9pbihcIi9cIik7XG4gICAgICByZXR1cm4gdGhpcy5mb2xkZXIoZm9sZGVyKS52YWx1ZShyZW1haW5pbmdQYXRoLCBpbml0LCBwYXJhbXMpO1xuICAgIH1cblxuICAgIHRoaXMuYmluZGluZyhrZXksIGluaXQsIHBhcmFtcyk7XG5cbiAgICByZXR1cm4gKHRoaXMuX19wYXJhbXNba2V5XSBhcyBUIHwgdW5kZWZpbmVkKSA/PyBudWxsO1xuICB9XG5cbiAgcHVibGljIGJpbmRpbmc8VCBleHRlbmRzIGFueT4oXG4gICAga2V5OiBzdHJpbmcsXG4gICAgaW5pdD86IFQsXG4gICAgcGFyYW1zPzogVHdlYWtwYW5lLkJpbmRpbmdQYXJhbXMsXG4gICk6IFR3ZWFrcGFuZS5JbnB1dEJpbmRpbmdBcGk8dW5rbm93biwgVD4gfCBudWxsIHtcbiAgICBjb25zdCBwYXRoID0ga2V5LnNwbGl0KFwiL1wiKTtcbiAgICBpZiAocGF0aC5sZW5ndGggPiAxKSB7XG4gICAgICBjb25zdCBmb2xkZXIgPSBwYXRoWzBdO1xuICAgICAgY29uc3QgcmVtYWluaW5nUGF0aCA9IHBhdGguc2xpY2UoMSkuam9pbihcIi9cIik7XG4gICAgICByZXR1cm4gdGhpcy5mb2xkZXIoZm9sZGVyKS5iaW5kaW5nKHJlbWFpbmluZ1BhdGgsIGluaXQsIHBhcmFtcyk7XG4gICAgfVxuXG4gICAgaWYgKGluaXQgIT0gbnVsbCkge1xuICAgICAgaWYgKHRoaXMuX19wYXJhbXNba2V5XSA9PSBudWxsKSB7XG4gICAgICAgIHRoaXMuX19wYXJhbXNba2V5XSA9IGluaXQ7XG4gICAgICAgIGNvbnN0IGJpbmRpbmcgPSB0aGlzLmNvbnRhaW5lckFwaS5hZGRCaW5kaW5nKFxuICAgICAgICAgIHRoaXMuX19wYXJhbXMsXG4gICAgICAgICAga2V5LFxuICAgICAgICAgIHBhcmFtcyxcbiAgICAgICAgKTtcbiAgICAgICAgdGhpcy5fX2JpbmRpbmdzW2tleV0gPSBiaW5kaW5nO1xuICAgICAgfSBlbHNlIGlmIChwYXJhbXM/LnJlYWRvbmx5KSB7XG4gICAgICAgIHRoaXMuX19wYXJhbXNba2V5XSA9IGluaXQ7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuX19iaW5kaW5nc1trZXldID8/IG51bGw7XG4gIH1cblxuICBwdWJsaWMgYmxhZGUoXG4gICAgaWQ6IHN0cmluZyxcbiAgICBwYXJhbXM/OiBUd2Vha3BhbmUuQmFzZUJsYWRlUGFyYW1zLFxuICApOiBUd2Vha3BhbmUuQmxhZGVBcGk8QmxhZGVDb250cm9sbGVyPFZpZXc+PiB8IG51bGwge1xuICAgIGNvbnN0IHBhdGggPSBpZC5zcGxpdChcIi9cIik7XG4gICAgaWYgKHBhdGgubGVuZ3RoID4gMSkge1xuICAgICAgY29uc3QgZm9sZGVyID0gcGF0aFswXTtcbiAgICAgIGNvbnN0IHJlbWFpbmluZ1BhdGggPSBwYXRoLnNsaWNlKDEpLmpvaW4oXCIvXCIpO1xuICAgICAgcmV0dXJuIHRoaXMuZm9sZGVyKGZvbGRlcikuYmxhZGUocmVtYWluaW5nUGF0aCwgcGFyYW1zKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fX2JsYWRlc1tpZF0gPT0gbnVsbCAmJiBwYXJhbXMgIT0gbnVsbCkge1xuICAgICAgY29uc3QgYmxhZGUgPSB0aGlzLmNvbnRhaW5lckFwaS5hZGRCbGFkZShwYXJhbXMpO1xuICAgICAgdGhpcy5fX2JsYWRlc1tpZF0gPSBibGFkZTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5fX2JsYWRlc1tpZF07XG4gIH1cbn1cbiIsImltcG9ydCAqIGFzIFR3ZWFrcGFuZSBmcm9tIFwidHdlYWtwYW5lXCI7XG5pbXBvcnQgeyBGb2xkZXJBcGkgfSBmcm9tIFwiQHR3ZWFrcGFuZS9jb3JlXCI7XG5pbXBvcnQgeyBJbUNvbnRhaW5lckFwaSB9IGZyb20gXCIuL0ltQ29udGFpbmVyQXBpXCI7XG5cbmV4cG9ydCBjbGFzcyBJbUZvbGRlckFwaSBleHRlbmRzIEltQ29udGFpbmVyQXBpPEZvbGRlckFwaT4ge1xuICBwdWJsaWMgZ2V0IGZvbGRlckFwaSgpOiBUd2Vha3BhbmUuRm9sZGVyQXBpIHtcbiAgICByZXR1cm4gdGhpcy5jb250YWluZXJBcGk7XG4gIH1cblxuICBwdWJsaWMgY29uc3RydWN0b3IoZm9sZGVyOiBUd2Vha3BhbmUuRm9sZGVyQXBpKSB7XG4gICAgc3VwZXIoZm9sZGVyKTtcbiAgfVxufVxuXG4vLyBkb24ndCB3b3JyeSBhYm91dCBpdFxuSW1Db250YWluZXJBcGkuaW1Gb2xkZXJBcGlDdG9yID0gSW1Gb2xkZXJBcGk7XG4iLCJpbXBvcnQgeyBQYW5lIH0gZnJvbSBcInR3ZWFrcGFuZVwiO1xuaW1wb3J0IHsgSW1Db250YWluZXJBcGkgfSBmcm9tIFwiLi9JbUNvbnRhaW5lckFwaVwiO1xuaW1wb3J0IHsgUGFuZUNvbmZpZyB9IGZyb20gXCJ0d2Vha3BhbmUvZGlzdC90eXBlcy9wYW5lL3BhbmUtY29uZmlnXCI7XG5cbmV4cG9ydCBjbGFzcyBJbVBhbmUgZXh0ZW5kcyBJbUNvbnRhaW5lckFwaTxQYW5lPiB7XG4gIHB1YmxpYyBnZXQgcGFuZSgpOiBQYW5lIHtcbiAgICByZXR1cm4gdGhpcy5jb250YWluZXJBcGk7XG4gIH1cblxuICBwdWJsaWMgY29uc3RydWN0b3IoY29uZmlnPzogUGFuZUNvbmZpZykge1xuICAgIHN1cGVyKG5ldyBQYW5lKGNvbmZpZykpO1xuICB9XG59XG4iLCJpbXBvcnQgKiBhcyBUd2Vha3BhbmUgZnJvbSBcInR3ZWFrcGFuZVwiO1xuaW1wb3J0IHsgSW1Db250YWluZXJBcGkgfSBmcm9tIFwiLi9JbUNvbnRhaW5lckFwaVwiO1xuXG5leHBvcnQgY2xhc3MgSW1UYWJQYWdlQXBpIGV4dGVuZHMgSW1Db250YWluZXJBcGk8VHdlYWtwYW5lLlRhYlBhZ2VBcGk+IHtcbiAgcHVibGljIGdldCBmb2xkZXJBcGkoKTogVHdlYWtwYW5lLlRhYlBhZ2VBcGkge1xuICAgIHJldHVybiB0aGlzLmNvbnRhaW5lckFwaTtcbiAgfVxuXG4gIHB1YmxpYyBjb25zdHJ1Y3RvcihwYWdlOiBUd2Vha3BhbmUuVGFiUGFnZUFwaSkge1xuICAgIHN1cGVyKHBhZ2UpO1xuICB9XG59XG4iLCJpbXBvcnQgKiBhcyBUd2Vha3BhbmUgZnJvbSBcInR3ZWFrcGFuZVwiO1xuaW1wb3J0IHsgSW1Db250YWluZXJBcGkgfSBmcm9tIFwiLi9JbUNvbnRhaW5lckFwaVwiO1xuaW1wb3J0IHsgSW1UYWJQYWdlQXBpIH0gZnJvbSBcIi4vSW1UYWJQYWdlQXBpXCI7XG5cbmV4cG9ydCBjbGFzcyBJbVRhYkFwaSB7XG4gIHB1YmxpYyByZWFkb25seSB0YWJBcGk6IFR3ZWFrcGFuZS5UYWJBcGk7XG4gIHByaXZhdGUgX19wYWdlczogeyBbdGl0bGU6IHN0cmluZ106IEltVGFiUGFnZUFwaSB9O1xuXG4gIHB1YmxpYyBjb25zdHJ1Y3Rvcih0YWJBcGk6IFR3ZWFrcGFuZS5UYWJBcGkpIHtcbiAgICB0aGlzLnRhYkFwaSA9IHRhYkFwaTtcbiAgICB0aGlzLl9fcGFnZXMgPSB7fTtcblxuICAgIHRhYkFwaS5wYWdlcy5mb3JFYWNoKChwYWdlKSA9PiB7XG4gICAgICB0aGlzLl9fcGFnZXNbcGFnZS50aXRsZV0gPSBuZXcgSW1UYWJQYWdlQXBpKHBhZ2UpO1xuICAgIH0pO1xuICB9XG5cbiAgcHVibGljIHBhZ2UoXG4gICAgdGl0bGU6IHN0cmluZyxcbiAgICBwYXJhbXM/OiBQYXJ0aWFsPFR3ZWFrcGFuZS5UYWJQYWdlUGFyYW1zPixcbiAgKTogSW1UYWJQYWdlQXBpIHtcbiAgICBpZiAodGhpcy5fX3BhZ2VzW3RpdGxlXSA9PSBudWxsKSB7XG4gICAgICBjb25zdCBwYWdlID0gdGhpcy50YWJBcGkuYWRkUGFnZSh7IHRpdGxlLCAuLi5wYXJhbXMgfSk7XG4gICAgICB0aGlzLl9fcGFnZXNbdGl0bGVdID0gbmV3IEltVGFiUGFnZUFwaShwYWdlKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5fX3BhZ2VzW3RpdGxlXTtcbiAgfVxufVxuXG4vLyBkb24ndCB3b3JyeSBhYm91dCBpdFxuSW1Db250YWluZXJBcGkuaW1UYWJBcGlDdG9yID0gSW1UYWJBcGk7XG4iXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztNQVVhLGNBQWMsQ0FBQTtBQXFCekIsSUFBQSxXQUFBLENBQW1CLFNBQXdCLEVBQUE7QUFDekMsUUFBQSxJQUFJLENBQUMsWUFBWSxHQUFHLFNBQVMsQ0FBQztBQUM5QixRQUFBLElBQUksQ0FBQyxRQUFRLEdBQUcsRUFBRSxDQUFDO0FBQ25CLFFBQUEsSUFBSSxDQUFDLFNBQVMsR0FBRyxFQUFFLENBQUM7QUFDcEIsUUFBQSxJQUFJLENBQUMsU0FBUyxHQUFHLEVBQUUsQ0FBQztBQUNwQixRQUFBLElBQUksQ0FBQyxNQUFNLEdBQUcsRUFBRSxDQUFDO0FBQ2pCLFFBQUEsSUFBSSxDQUFDLFVBQVUsR0FBRyxFQUFFLENBQUM7QUFDckIsUUFBQSxJQUFJLENBQUMsUUFBUSxHQUFHLEVBQUUsQ0FBQztLQUNwQjtJQUVNLE1BQU0sQ0FDWCxLQUFhLEVBQ2IsTUFBd0MsRUFBQTtRQUV4QyxNQUFNLElBQUksR0FBRyxLQUFLLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQzlCLFFBQUEsSUFBSSxJQUFJLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRTtBQUNuQixZQUFBLE1BQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUN2QixZQUFBLE1BQU0sYUFBYSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQzlDLFlBQUEsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLE1BQU0sQ0FBQyxhQUFhLEVBQUUsTUFBTSxDQUFDLENBQUM7U0FDMUQ7QUFFRCxRQUFBLElBQUksQ0FBQyxjQUFjLENBQUMsZUFB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
